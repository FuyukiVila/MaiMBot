# 发送消息命令插件

这个插件提供了多个便捷的消息发送命令，允许管理员向指定群聊或用户发送消息。

## 命令列表

### 1. `/send` - 基础发送命令
向指定群聊或用户发送文本消息。

**语法:**
```
/send <group|user> <ID> <消息内容>
```

**示例:**
```
/send group 123456789 大家好！
/send user 987654321 私聊消息
```

### 2. `/sendfull` - 增强发送命令
支持多种消息类型和平台的发送命令。

**语法:**
```
/sendfull <消息类型> <目标类型> <ID> [平台] <内容>
```

**消息类型:**
- `text` - 文本消息
- `image` - 图片消息（提供图片URL）
- `emoji` - 表情消息

**示例:**
```
/sendfull text group 123456789 qq 大家好！这是文本消息
/sendfull image user 987654321 https://example.com/image.jpg
/sendfull emoji group 123456789 😄
```

### 3. `/msg` - 快速群聊发送
快速向群聊发送文本消息的简化命令。

**语法:**
```
/msg <群ID> <消息内容>
```

**示例:**
```
/msg 123456789 大家好！
/msg 987654321 这是一条快速消息
```

### 4. `/pm` - 私聊发送
快速向用户发送私聊消息的命令。

**语法:**
```
/pm <用户ID> <消息内容>
```

**示例:**
```
/pm 123456789 你好！
/pm 987654321 这是私聊消息
```

## 使用前提

1. **目标存在**: 目标群聊或用户必须已经在机器人的数据库中存在对应的chat_stream记录
2. **权限要求**: 机器人必须在目标群聊中有发言权限
3. **管理员权限**: 这些命令通常需要管理员权限才能使用

## 错误处理

如果消息发送失败，可能的原因：

1. **目标不存在**: 指定的群ID或用户ID在数据库中找不到对应记录
2. **权限不足**: 机器人在目标群聊中没有发言权限
3. **网络问题**: 网络连接异常
4. **平台限制**: 目标平台的API限制

## 注意事项

1. **ID格式**: 群ID和用户ID必须是纯数字
2. **消息长度**: 注意平台对消息长度的限制
3. **图片格式**: 发送图片时需要提供有效的图片URL
4. **平台支持**: 目前主要支持QQ平台，其他平台可能需要额外配置

## 安全建议

1. 限制这些命令的使用权限，避免滥用
2. 监控发送频率，防止刷屏
3. 定期检查发送日志，确保合规使用

## 故障排除

查看日志文件中的详细错误信息：
```
[INFO] [Command:send] 执行发送消息命令: group:123456789 -> 大家好！...
[ERROR] [Command:send] 发送群聊消息时出错: 未找到群ID为 123456789 的聊天流
```

根据错误信息进行相应的处理。 